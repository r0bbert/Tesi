\chapter*{Introduction}
\addcontentsline{toc}{chapter}{Introduction}

\iffalse

This work discusses the adhesivity of e-graphs, a data structure introduced in \cite{???}\todo{citations}, giving them a structure of category and then working on its algebraic properties. 

The first chapter is about basic concepts of category theory, such as categories, limits, constructions and adhesivity, that will be used to model the categories on which in the second chapter we will work on.
The second chapter is entirely focused on graphs, starting from a general notion of graphs, that is, a two sorted algebra consisting of a set of edges and a set of vertices and two operators, 
source and target, which assign to each edge a source vertex and a target one. The structure we will use to model graphs are presheaves, which not only provides a straightforward formalization of them but also makes in evidence particular properties proper of graphs. Then, we endow graphs with an equivalence relation among verices, to end up with an adhesivity result. The last part is about e-graphs, that are nothing but graphs with a certain type of equivalence relation, inheriting then almost all the properties of the category of graphs with equivalences.

Graphs arise almost everywhere in computer science, due to their capability of abstraction of real world situations and their simplicity. In concurrency theory, for example, system states are represented in a strightformward way using such structures, allowing representation of states and transitions, (e.g., Petri Nets), but also providing methods to model parallelism.
...
Examples of this can be foud in {\color{red} Concur2006, Left-Linear rules in Adh cats}. 

A formal definition of e-graphs, using category theory, allows us to analize certain adhesivity properties of this structure, in order to integrate it in a more general reseach line regarding concurrent rewriting systems. The main standard for rewriting systems, nowadays, is the DPO approach, 

%\fi

I contenuti dell'introduzione vanno bene, ma li riaggiusterei leggermente, in modo da dare anche un po' di contesto.

\begin{itemize}
\item i formalismi visuali hanno una lunga tradizione e stanno avendo una rinascita di interesse, data anche la complessita dei sistemi software e hardware attuali
\item la manipolazione di grafi ha un fine fra le altre cose quello di ottimizzare i sistemi o di permetterne l'upgrade di componenti
\item servono basi formali solide, per poter parlare ad esempio di parallelismo e concorrenza
\item le categorie adesive e il DPO sono diventate il formalismo d'eccezione per questo tipo di considerazioni
\item fra i vari formalismi grafici, gli e-graph, utilizzati per xxx, stanno riscuotendo successo grazie alle implementazioni efficienti, ma manca ancora un theoretical underpinning
\item qualche fa la tesi e' mostrare come anche gli e-graphs ricadano nel paradigma adesive+DPO
\end{itemize}

\fi

The developlment of visual formalisms such as equality graphs (e-graphs) has to be brought back to the eighties, in the context of automatic theorem provers (ATPs).
E-Graphs are an extension of prior structures, in order to represent in a more compact way equivalence classes of expressions, mantaining closure-under-congruence invariant.
Graph manipulation turns out to be useful in practical fields such as systems optimization or components upgrades.
The development of formal frameworks is therefore necessary, especially for what concernes parallelism and concurrency, as the research line in which this work wants to be integrated.

In recent years, graph-like structures found a wide diffusion as models to rewriting-based formalisms and dependency analisys.
As an example, a graph can model a set of entities and relations between them within a state, while rewriting steps can model computation steps that, modifying the graph, result in changes of the state of the system.

Dependency and concurrency harden the process of program optimization, because application order of rewrites can significantly improve the quality of the overall rewitten program.
Such problem is known as \textit{phase-ordering problem}, and a recent approach, known as equality saturation, was developed in \cite{Tate_2011}.
This technique provides an alternative to heuristic methods, consisting of keeping track of a set of candidate equivalent optimized programs, 
computed by repeatedly inferring equivalences between program fragments.
E-Graphs provide a compact representation of this set, making operation feasible in concrete applications.

Due to its flexibility and locality properties, DPO (double pushout) approach and adhesive categories have become a standard model for rewriting-based formalisms. 
A presentation of e-graphs as the one in this work allows to move beyond the operational representation via data structures, in favour of a formalization that models the changes of the structure as well.
In this setup, adhesivity results allow to make use of all the advantages of DPO rewriting, because of the generality of such framework.
The elegance of such formalism lies on the definition of adhesive categories, i.e., categories where it is guaranteed the existence of pullbacks and pushouts along (some) monomorphisms, which are additionally required to be Van Kampen (stability of pushouts under pullbacks and stability of pullbacks under combined pushouts and pullbacks \cite{Ehrig_Golas}).
The only downside of such formalism is the difficulty of proving statements using the definition. 
For cerain calasses of caeogries, there exists a charaterization of such property, presented in \cite{castelnovo2022newcriterionmathcalmmathcalnadhesivity}.

Among all graphic frameworks, e-graphs, widely used in modern SMT (satisfiability modulo theories) solvers, such as Z3, are gaining success, due to the efficiency of their implementations, but is still missing a solid theoretical underpinning, since almost all the progresses remain implementation-based.
Thus, one of the aims of this work is to present a more theoretic representation of e-graphs than the one at the state of the art presented in \cite{egg}, using categorial tools to be formalized.
The main result is, therefore, to show that e-graphs relapse in the current adhesive paradigm.

In order to work with e-graphs, some considreration on graphs with equivalences are to be done. 
A graph with equivalence is nothing but a graph endowed with an equivalence relation among its nodes. 
The main result on this kind of graphs is a weak adhesivity property that holds for particular monomorphisms. 
Such result is, then, inherited by e-graphs, which are graphs with equivalence which satisfies additional requirements that can be intuitively summarized as \textit{the property of edges to have equivalent sources whenever targets are equivalent}.

Then, the structure of this work is the following.
The first chapter is about basic concepts of category theory, such as categories, limits, constructions and adhesivity, that will be used to model the categories on which in the second chapter we will work on.
The prinicpal aim is to build up the categorial toolbox to work with. Category theory provides a general and uniform formalism, hence almost all definitions may seem very abstract, hence some concrete examples will be done.
The second chapter is entirely focused on graphs, starting from a general notion of graphs, that is, a two sorted algebra consisting of a set of edges and a set of vertices and two operators, source and target, which assign to each edge a source vertex and a target one.
The structure we will use to model graphs are presheaves, which not only provides a straightforward formalization of them but also makes in evidence particular properties proper of graphs.
Then, we endow graphs with an equivalence relation among verices, to end up with an adhesivity result.
The last part is about e-graphs, and in particular their formalization and how they inherit certain properties from graphs with equivalences.


