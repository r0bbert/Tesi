% !TeX root = ./main.tex

\chapter*{Introduction}
\addcontentsline{toc}{chapter}{Introduction}
\markboth{INTRODUCTION}{}
\iffalse

This work discusses the adhesivity of e-graphs, a data structure introduced in \cite{???}\todo{citations}, giving them a structure of category and then working on its algebraic properties. 

The first chapter is about basic concepts of category theory, such as categories, limits, constructions and adhesivity, that will be used to model the categories on which in the second chapter we will work on.
The second chapter is entirely focused on graphs, starting from a general notion of graphs, that is, a two sorted algebra consisting of a set of edges and a set of vertices and two operators, 
source and target, which assign to each edge a source vertex and a target one. The structure we will use to model graphs are presheaves, which not only provides a straightforward formalization of them but also makes in evidence particular properties proper of graphs. Then, we endow graphs with an equivalence relation among verices, to end up with an adhesivity result. The last part is about e-graphs, that are nothing but graphs with a certain type of equivalence relation, inheriting then almost all the properties of the category of graphs with equivalences.

Graphs arise almost everywhere in computer science, due to their capability of abstraction of real world situations and their simplicity. In concurrency theory, for example, system states are represented in a strightformward way using such structures, allowing representation of states and transitions, (e.g., Petri Nets), but also providing methods to model parallelism.
...
Examples of this can be foud in {\color{red} Concur2006, Left-Linear rules in Adh cats}. 

A formal definition of e-graphs, using category theory, allows us to analize certain adhesivity properties of this structure, in order to integrate it in a more general reseach line regarding concurrent rewriting systems. The main standard for rewriting systems, nowadays, is the DPO approach, 

%\fi

I contenuti dell'introduzione vanno bene, ma li riaggiusterei leggermente, in modo da dare anche un po' di contesto.

\begin{itemize}
\item i formalismi visuali hanno una lunga tradizione e stanno avendo una rinascita di interesse, data anche la complessita dei sistemi software e hardware attuali
\item la manipolazione di grafi ha un fine fra le altre cose quello di ottimizzare i sistemi o di permetterne l'upgrade di componenti
\item servono basi formali solide, per poter parlare ad esempio di parallelismo e concorrenza
\item le categorie adesive e il DPO sono diventate il formalismo d'eccezione per questo tipo di considerazioni
\item fra i vari formalismi grafici, gli e-graph, utilizzati per xxx, stanno riscuotendo successo grazie alle implementazioni efficienti, ma manca ancora un theoretical underpinning
\item qualche fa la tesi e' mostrare come anche gli e-graphs ricadano nel paradigma adesive+DPO
\end{itemize}

\fi

The use of graph-like structures as specification tools, as well as formal models, in rewriting-based formalisms and dependency analysis has a long tradition in computer science.
% and related fields. 
These structures offer an intuitive, flexible, and expressive framework for describing the behaviour and the evolution of complex systems.

For instance, graphs can represent a set of entities as nodes and the relationships between them as edges, providing a clear depiction of the state of a system at any given moment. Rewriting steps then model computational processes, simulating changes in the system. These transformations might involve the addition, removal, or reconfiguration of nodes and edges, enabling the representation of diverse phenomena such as modifications in the architecture of a software system, evolution steps of a biological network, or updates within a dependency graph. 

%The development of visual formalisms such as equality graphs (e-graphs) has to be brought back to the 1980s, in the context of automatic theorem provers (ATPs).
%^E-Graphs are an extension of prior structures, in order to represent in a more compact way equivalence classes of expressions, maintaining closure-under-congruence invariant.
%Graph manipulation turns out to be useful in practical fields such as systems optimization or components upgrades.
%The development of formal frameworks is therefore necessary, especially for what concerns parallelism and concurrency, as the research line in which this work wants to be integrated.

The development of the visual formalism of \emph{equality graphs} (e-graphs) can be traced back to the 1980s, originating in the context of automatic theorem provers (ATPs) \cite{Nelson1980}. 
E-graphs provide a compact and efficient way to represent equivalence classes of expressions while maintaining the crucial property of closure under congruence. 
This ensures that equivalences are preserved across all contexts in which an expression might appear, making e-graphs a robust tools for reasoning about equivalence of algebraic expressions.
%\todo{Non sicuro dell'ultima riga}.

Dependency and concurrency harden the process of program optimization, because application order of rewrites can significantly improve the quality of the overall program.
Such problem is known as \textit{phase-ordering problem}, and a recent approach, known as equality saturation, was developed in \cite{Tate_2011}.
This technique provides an alternative to heuristic methods, consisting of keeping track of a set of candidate equivalent optimized programs, 
computed by repeatedly inferring equivalences between program fragments.
E-Graphs provide a compact representation of this set, making operation feasible in concrete applications.
%\todo{Non ho capito questo paragrafo}

The utility of e-graphs thus extends beyond theoretical applications, finding practical relevance in fields such as system optimization and component upgrading. Examples of uses can be found in \cite{Cheli2021}.
%\todo{Qua servirebbero degli esempi di uso}
%
However, the more a formalism is used, the greater is the need for formal frameworks to guide its development and application. In particular, addressing issues of parallelism and concurrency is critical for 
a mathematically 
sound understanding of these structures.

%Among the rewriting paradigms for graph-like structures, one of the leading proposal is the Double Pushout (DPO) approach \cite{Ehrig_Golas,ehrig2006fundamentals}, since it provides, paired with the framework of $\mathcal{M}$-adhesive  categories \cite{lack2005adhesive,azzi2019essence,behr2022fundamentals}, a robust mathematical foundation for the definition and the application of rules. 
Among the rewriting paradigms for graph-like structures, one of the leading proposal is the Double Pushout (DPO) approach \cite{Ehrig_Golas,ehrig2006fundamentals}, since it provides, paired with the framework of $\mathcal{M}$-adhesive  categories \cite{lack2005adhesive,azzi2019essence,behr2022fundamentals}, a robust mathematical foundation for the definition and the application of rules,
that us the identification of a subgraph to be removed and the insertion of a new subgraph.
%
Integrating the theory of e-graphs manipulation into the broader subject of DPO rewriting would put on firmer ground the status of e-graphs. Moreover, it would allow to apply to this new context the well known results about concurrency and parallelism already known provided by the abstract theory of DPO rewriting systems \cite{baldan1999concurrent,ehrig1999handbook}. 
 
Such an integration is the main aim of the thesis.
 On the technical level, to reach our aim we need to prove some adhesivity property of e-graphs. 
 In order to do so, some consideration on graphs with equivalences are in order. 
 A graph with equivalence is nothing but a graph endowed with an equivalence relation among its nodes. 
 The main result on this kind of graphs is a weak adhesivity property that holds for regular monomorphisms. 
% Such result is, then, inherited by e-graphs \todo{Da qualche parte mettere riferimento a \cite{egg}}, which are graphs with equivalence which satisfies additional requirements that can be intuitively summarized as the property of edges to have equivalent sources whenever targets are equivalent.
%
%%On the technical level, to reach our objective we need to prove that the category of e-graphs exhibits a specific adhesivity property. To this end, it is necessary to first examine \emph{graphs with equivalence}, as they form the foundational structure underlying e-graphs.
%
%A graph with equivalence is simply a graph where an equivalence relation is defined on its nodes. The primary result concerning graphs with equivalences is an adhesivity property with respect to regular monomorphisms. 
%
 This adhesivity result, in turn, extends naturally, via the results of \cite{castelnovo2022newcriterionmathcalmmathcalnadhesivity}, to e-graphs, which in fact can be interpreted as a specialised class of graphs with equivalences that satisfy additional structural constraints. 
 An operational presentation of such structures can be found in \cite{egg}. 
 Specifically, e-graphs enforce a condition that edges must respect equivalence relations: if two edges have equivalent target nodes, then their source nodes must also be equivalent.

\iffalse 
A presentation of e-graphs as the one in this work allows to move beyond the operational representation via data structures, in favour of a formalization that models the changes of the structure as well.
In this setup, adhesivity results allow to make use of all the advantages of DPO rewriting, because of the generality of such framework.
The elegance of such formalism lies on the definition of adhesive categories, i.e., categories where it is guaranteed the existence of pullbacks and pushouts along (some) monomorphisms, which are additionally required to be Van Kampen (stability of pushouts under pullbacks and stability of pullbacks under combined pushouts and pullbacks \cite{Ehrig_Golas}).
The only downside of such formalism is the difficulty of proving statements using the definition. 
For cerain calasses of caeogries, there exists a charaterization of such property, presented in \cite{castelnovo2022newcriterionmathcalmmathcalnadhesivity}.


In order to work with e-graphs, some considreration on graphs with equivalences are to be done. 
A graph with equivalence is nothing but a graph endowed with an equivalence relation among its nodes. 
The main result on this kind of graphs is a weak adhesivity property that holds for particular monomorphisms. 
Such result is, then, inherited by e-graphs \todo{Da qualche parte mettere riferimento a \cite{egg}}, 
which are graphs with equivalence which satisfies additional requirements that can be intuitively summarised 
as \textit{the property of edges to have equivalent sources whenever targets are equivalent}.
\fi 

\smallskip \emph{Synopsis.} \Cref{chap:one} introduces the basic concepts of category theory that will be used throughout this thesis. The main goal of this chapter is to build the categorical toolbox necessary for the remainder of the work. Category theory provides a general and uniform formalism, which has the side effect of making many definitions seem quite abstract. To address this, we will provide concrete examples to help clarify and illustrate the concepts.
\Cref{chap:two} focuses on graphs. The structure we will use to model graphs are presheaves, which not only provides a straightforward formalisation, putting in evidence the categorical properties of graphs that we will need.  We will then endow graphs with an equivalence relation among vertices, and proof that the resulting category satisfies an adhesivity property. Finally, in the last part we will examine
 e-graphs, showing that they inherit the above adhesivity property from graphs with equivalences.


